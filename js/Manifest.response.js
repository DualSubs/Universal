class e{static name="Lodash";static version="1.2.2";static about(){return console.log(`\nğŸŸ§ ${this.name} v${this.version}\n`)}static get(e={},a="",t=void 0){Array.isArray(a)||(a=this.toPath(a));const s=a.reduce(((e,a)=>Object(e)[a]),e);return void 0===s?t:s}static set(e={},a="",t){return Array.isArray(a)||(a=this.toPath(a)),a.slice(0,-1).reduce(((e,t,s)=>Object(e[t])===e[t]?e[t]:e[t]=/^\d+$/.test(a[s+1])?[]:{}),e)[a[a.length-1]]=t,e}static unset(e={},a=""){return Array.isArray(a)||(a=this.toPath(a)),a.reduce(((e,t,s)=>s===a.length-1?(delete e[t],!0):Object(e)[t]),e)}static toPath(e){return e.replace(/\[(\d+)\]/g,".$1").split(".").filter(Boolean)}static escape(e){const a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return e.replace(/[&<>"']/g,(e=>a[e]))}static unescape(e){const a={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"};return e.replace(/&amp;|&lt;|&gt;|&quot;|&#39;/g,(e=>a[e]))}}class a{static name="$Storage";static version="1.0.9";static about(){return console.log(`\nğŸŸ§ ${this.name} v${this.version}\n`)}static data=null;static dataFile="box.dat";static#e=/^@(?<key>[^.]+)(?:\.(?<path>.*))?$/;static#a(){return"undefined"!=typeof $environment&&$environment["surge-version"]?"Surge":"undefined"!=typeof $environment&&$environment["stash-version"]?"Stash":"undefined"!=typeof module&&module.exports?"Node.js":"undefined"!=typeof $task?"Quantumult X":"undefined"!=typeof $loon?"Loon":"undefined"!=typeof $rocket?"Shadowrocket":"undefined"!=typeof Egern?"Egern":void 0}static getItem(a=new String,t=null){let s=t;if(!0===a.startsWith("@")){const{key:t,path:n}=a.match(this.#e)?.groups;a=t;let l=this.getItem(a,{});"object"!=typeof l&&(l={}),s=e.get(l,n);try{s=JSON.parse(s)}catch(e){}}else{switch(this.#a()){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":s=$persistentStore.read(a);break;case"Quantumult X":s=$prefs.valueForKey(a);break;case"Node.js":this.data=this.#t(this.dataFile),s=this.data?.[a];break;default:s=this.data?.[a]||null}try{s=JSON.parse(s)}catch(e){}}return s??t}static setItem(a=new String,t=new String){let s=!1;if("object"==typeof t)t=JSON.stringify(t);else t=String(t);if(!0===a.startsWith("@")){const{key:n,path:l}=a.match(this.#e)?.groups;a=n;let g=this.getItem(a,{});"object"!=typeof g&&(g={}),e.set(g,l,t),s=this.setItem(a,g)}else switch(this.#a()){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":s=$persistentStore.write(t,a);break;case"Quantumult X":s=$prefs.setValueForKey(t,a);break;case"Node.js":this.data=this.#t(this.dataFile),this.data[a]=t,this.#s(this.dataFile),s=!0;break;default:s=this.data?.[a]||null}return s}static removeItem(a){let t=!1;if(!0===a.startsWith("@")){const{key:s,path:n}=a.match(this.#e)?.groups;a=s;let l=this.getItem(a);"object"!=typeof l&&(l={}),keyValue=e.unset(l,n),t=this.setItem(a,l)}else switch(this.#a()){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":case"Node.js":default:t=!1;break;case"Quantumult X":t=$prefs.removeValueForKey(a)}return t}static clear(){let e=!1;switch(this.#a()){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":case"Node.js":default:e=!1;break;case"Quantumult X":e=$prefs.removeAllValues()}return e}static#t(e){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const a=this.path.resolve(e),t=this.path.resolve(process.cwd(),e),s=this.fs.existsSync(a),n=!s&&this.fs.existsSync(t);if(!s&&!n)return{};{const e=s?a:t;try{return JSON.parse(this.fs.readFileSync(e))}catch(e){return{}}}}}static#s(e=this.dataFile){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const a=this.path.resolve(e),t=this.path.resolve(process.cwd(),e),s=this.fs.existsSync(a),n=!s&&this.fs.existsSync(t),l=JSON.stringify(this.data);s?this.fs.writeFileSync(a,l):n?this.fs.writeFileSync(t,l):this.fs.writeFileSync(a,l)}}}class t{static name="ENV";static version="1.8.3";static about(){return console.log(`\nğŸŸ§ ${this.name} v${this.version}\n`)}constructor(e,a){console.log(`\nğŸŸ§ ${t.name} v${t.version}\n`),this.name=e,this.logs=[],this.isMute=!1,this.isMuteLog=!1,this.logSeparator="\n",this.encoding="utf-8",this.startTime=(new Date).getTime(),Object.assign(this,a),this.log(`\nğŸš© å¼€å§‹!\n${e}\n`)}environment(){switch(this.platform()){case"Surge":return $environment.app="Surge",$environment;case"Stash":return $environment.app="Stash",$environment;case"Egern":return $environment.app="Egern",$environment;case"Loon":let e=$loon.split(" ");return{device:e[0],ios:e[1],"loon-version":e[2],app:"Loon"};case"Quantumult X":return{app:"Quantumult X"};case"Node.js":return process.env.app="Node.js",process.env;default:return{}}}platform(){return"undefined"!=typeof $environment&&$environment["surge-version"]?"Surge":"undefined"!=typeof $environment&&$environment["stash-version"]?"Stash":"undefined"!=typeof module&&module.exports?"Node.js":"undefined"!=typeof $task?"Quantumult X":"undefined"!=typeof $loon?"Loon":"undefined"!=typeof $rocket?"Shadowrocket":"undefined"!=typeof Egern?"Egern":void 0}isNode(){return"Node.js"===this.platform()}isQuanX(){return"Quantumult X"===this.platform()}isSurge(){return"Surge"===this.platform()}isLoon(){return"Loon"===this.platform()}isShadowrocket(){return"Shadowrocket"===this.platform()}isStash(){return"Stash"===this.platform()}isEgern(){return"Egern"===this.platform()}async getScript(e){return await this.fetch(e).then((e=>e.body))}async runScript(e,t){let s=a.getItem("@chavy_boxjs_userCfgs.httpapi");s=s?.replace?.(/\n/g,"")?.trim();let n=a.getItem("@chavy_boxjs_userCfgs.httpapi_timeout");n=1*n??20,n=t?.timeout??n;const[l,g]=s.split("@"),o={url:`http://${g}/v1/scripting/evaluate`,body:{script_text:e,mock_type:"cron",timeout:n},headers:{"X-Key":l,Accept:"*/*"},timeout:n};await this.fetch(o).then((e=>e.body),(e=>this.logErr(e)))}initGotEnv(e){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,e&&(e.headers=e.headers?e.headers:{},void 0===e.headers.Cookie&&void 0===e.cookieJar&&(e.cookieJar=this.ckjar))}async fetch(a={}||"",t={}){switch(a.constructor){case Object:a={...t,...a};break;case String:a={...t,url:a}}a.method||(a.method="GET",(a.body??a.bodyBytes)&&(a.method="POST")),delete a.headers?.Host,delete a.headers?.[":authority"],delete a.headers?.["Content-Length"],delete a.headers?.["content-length"];const s=a.method.toLocaleLowerCase();switch(this.platform()){case"Loon":case"Surge":case"Stash":case"Egern":case"Shadowrocket":default:return a.timeout&&(a.timeout=parseInt(a.timeout,10),this.isSurge()||(a.timeout=1e3*a.timeout)),a.policy&&(this.isLoon()&&(a.node=a.policy),this.isStash()&&e.set(a,"headers.X-Stash-Selected-Proxy",encodeURI(a.policy)),this.isShadowrocket()&&e.set(a,"headers.X-Surge-Proxy",a.policy)),"boolean"==typeof a.redirection&&(a["auto-redirect"]=a.redirection),a.bodyBytes&&!a.body&&(a.body=a.bodyBytes,delete a.bodyBytes),await new Promise(((e,t)=>{$httpClient[s](a,((s,n,l)=>{s?t(s):(n.ok=/^2\d\d$/.test(n.status),n.statusCode=n.status,l&&(n.body=l,1==a["binary-mode"]&&(n.bodyBytes=l)),e(n))}))}));case"Quantumult X":return a.policy&&e.set(a,"opts.policy",a.policy),"boolean"==typeof a["auto-redirect"]&&e.set(a,"opts.redirection",a["auto-redirect"]),a.body instanceof ArrayBuffer?(a.bodyBytes=a.body,delete a.body):ArrayBuffer.isView(a.body)?(a.bodyBytes=a.body.buffer.slice(a.body.byteOffset,a.body.byteLength+a.body.byteOffset),delete object.body):a.body&&delete a.bodyBytes,await $task.fetch(a).then((e=>(e.ok=/^2\d\d$/.test(e.statusCode),e.status=e.statusCode,e)),(e=>Promise.reject(e.error)));case"Node.js":let t=require("iconv-lite");this.initGotEnv(a);const{url:n,...l}=a;return await this.got[s](n,l).on("redirect",((e,a)=>{try{if(e.headers["set-cookie"]){const t=e.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();t&&this.ckjar.setCookieSync(t,null),a.cookieJar=this.ckjar}}catch(e){this.logErr(e)}})).then((e=>(e.statusCode=e.status,e.body=t.decode(e.rawBody,this.encoding),e.bodyBytes=e.rawBody,e)),(e=>Promise.reject(e.message)))}}time(e,a=null){const t=a?new Date(a):new Date;let s={"M+":t.getMonth()+1,"d+":t.getDate(),"H+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(let a in s)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?s[a]:("00"+s[a]).substr((""+s[a]).length)));return e}msg(e=name,a="",t="",s){const n=e=>{switch(typeof e){case void 0:return e;case"string":switch(this.platform()){case"Surge":case"Stash":case"Egern":default:return{url:e};case"Loon":case"Shadowrocket":return e;case"Quantumult X":return{"open-url":e};case"Node.js":return}case"object":switch(this.platform()){case"Surge":case"Stash":case"Egern":case"Shadowrocket":default:return{url:e.url||e.openUrl||e["open-url"]};case"Loon":return{openUrl:e.openUrl||e.url||e["open-url"],mediaUrl:e.mediaUrl||e["media-url"]};case"Quantumult X":return{"open-url":e["open-url"]||e.url||e.openUrl,"media-url":e["media-url"]||e.mediaUrl,"update-pasteboard":e["update-pasteboard"]||e.updatePasteboard};case"Node.js":return}default:return}};if(!this.isMute)switch(this.platform()){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":default:$notification.post(e,a,t,n(s));break;case"Quantumult X":$notify(e,a,t,n(s));case"Node.js":}if(!this.isMuteLog){let s=["","==============ğŸ“£ç³»ç»Ÿé€šçŸ¥ğŸ“£=============="];s.push(e),a&&s.push(a),t&&s.push(t),console.log(s.join("\n")),this.logs=this.logs.concat(s)}}log(...e){e.length>0&&(this.logs=[...this.logs,...e]),console.log(e.join(this.logSeparator))}logErr(e){switch(this.platform()){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":case"Quantumult X":default:this.log("",`â—ï¸ ${this.name}, é”™è¯¯!`,e);break;case"Node.js":this.log("",`â—ï¸${this.name}, é”™è¯¯!`,e.stack)}}wait(e){return new Promise((a=>setTimeout(a,e)))}done(a={}){const t=((new Date).getTime()-this.startTime)/1e3;switch(this.log("",`ğŸš© ${this.name}, ç»“æŸ! ğŸ•› ${t} ç§’`,""),this.platform()){case"Surge":a.policy&&e.set(a,"headers.X-Surge-Policy",a.policy),$done(a);break;case"Loon":a.policy&&(a.node=a.policy),$done(a);break;case"Stash":a.policy&&e.set(a,"headers.X-Stash-Selected-Proxy",encodeURI(a.policy)),$done(a);break;case"Egern":case"Shadowrocket":default:$done(a);break;case"Quantumult X":a.policy&&e.set(a,"opts.policy",a.policy),delete a["auto-redirect"],delete a["auto-cookie"],delete a["binary-mode"],delete a.charset,delete a.host,delete a.insecure,delete a.method,delete a.opt,delete a.path,delete a.policy,delete a["policy-descriptor"],delete a.scheme,delete a.sessionIndex,delete a.statusCode,delete a.timeout,a.body instanceof ArrayBuffer?(a.bodyBytes=a.body,delete a.body):ArrayBuffer.isView(a.body)?(a.bodyBytes=a.body.buffer.slice(a.body.byteOffset,a.body.byteLength+a.body.byteOffset),delete a.body):a.body&&delete a.bodyBytes,$done(a);break;case"Node.js":process.exit(1)}}}class s{static name="EXTM3U";static version="0.8.7";static about=()=>console.log(`\nğŸŸ§ ${this.name} v${this.version}\n`);static#n=/^(?:(?<TAG>#(?:EXT|AIV)[^#:\s\r\n]+)(?::(?<OPTION>[^\r\n]+))?(?:(?:\r\n|\r|\n)(?<URI>[^#\s\r\n]+))?|(?<NOTE>#[^\r\n]+)?)(?:\r\n|\r|\n)?$/gm;static#l=/^((-?\d+[x.\d]+)|[0-9A-Z-]+)$/;static parse(e=new String){return[...e.matchAll(this.#n)].map((e=>(e=e?.groups||e,/=/.test(e?.OPTION)&&(e.OPTION=Object.fromEntries(`${e.OPTION},`.split(/,\s*(?![^"]*",)/).slice(0,-1).map((e=>((e=e.split(/=(.*)/))[1]=isNaN(e[1])?e[1].replace(/^"(.*)"$/,"$1"):parseInt(e[1],10),e))))),e)))}static stringify(e=new Array,a={lineBreak:"\n"}){return"#EXTM3U"!==e?.[0]?.TAG&&e.unshift({TAG:"#EXTM3U"}),e.map((e=>("object"==typeof e?.OPTION&&(e.OPTION=Object.entries(e.OPTION).map((a=>("#EXT-X-SESSION-DATA"===e?.TAG?a[1]=`"${a[1]}"`:isNaN(a[1])?"ID"===a[0]||"INSTREAM-ID"===a[0]||"KEYFORMAT"===a[0]?a[1]=`"${a[1]}"`:this.#l.test(a[1])||(a[1]=`"${a[1]}"`):a[1]="number"==typeof a[1]?a[1]:`"${a[1]}"`,a.join("=")))).join(",")),e=e?.URI?e.TAG+":"+e.OPTION+a.lineBreak+e.URI:e?.OPTION?e.TAG+":"+e.OPTION:e?.TAG?e.TAG:e?.NOTE?e.NOTE:""))).join(a.lineBreak)}}function n(e={},a={},t="",s="",n=!0,l="iPhone"){console.log(`â˜‘ï¸ Set DualSubs Subtitle Option, type: ${t}`,"");const g=e?.OPTION?.NAME.trim(),o=a?.OPTION?.NAME.trim(),i=e?.OPTION?.LANGUAGE.trim(),u=a?.OPTION?.LANGUAGE.trim();let r=JSON.parse(JSON.stringify(e));switch(t){case"Official":r.OPTION.NAME=`å®˜æ–¹å­—å¹• (${g}/${o})`;break;case"Translate":r.OPTION.NAME=`ç¿»è¯‘å­—å¹• (${g}/${o})`;break;case"External":r.OPTION.NAME=`å¤–æŒ‚å­—å¹• (${g})`}switch(s){case"Apple":case"MGM+":switch(l){case"Web":case"Macintosh":r.OPTION.LANGUAGE=i;break;default:r.OPTION.LANGUAGE=`${t} (${i}/${u})`}break;case"Disney+":case"PrimeVideo":case"Hulu":case"Nebula":case"PlutoTV":case"Paramount+":case"Discovery+Ph":r.OPTION.LANGUAGE=`${t} (${i}/${u})`;break;case"Max":case"HBOMax":case"Viki":default:r.OPTION.LANGUAGE=i;break;case"MUBI":r.OPTION.LANGUAGE=`${t} (${i}/${u})`,n||(r.OPTION.NAME=g)}r.OPTION["ASSOC-LANGUAGE"]=u;const c=r.OPTION.URI.includes("?")?"&":"?";return r.OPTION.URI+=`${c}subtype=${t}`,r.OPTION.AUTOSELECT="YES",n||(r.OPTION.DEFAULT="YES"),console.log(`âœ… Set DualSubs Subtitle Option, newOption: ${JSON.stringify(r)}`,""),r}function l(e="",a=""){return/^https?:\/\//i.test(a)?a:e.match(/^(https?:\/\/(?:[^?]+)\/)/i)?.[0]+a}class g{constructor(e="application/x-mpegURL",a="Universal"){this.Name="AttrList",this.Version="1.0.5",this.format=e,this.platform=a,console.log(`\nğŸŸ§ ${this.Name} v${this.Version} format: ${this.format} platform: ${this.platform}\n`)}get(e="",a=[],t="",s=[]){console.log(`â˜‘ï¸ Get Attribute List, type: ${t}, langCodes: ${s}`);let n=[];switch(this.format){case"application/x-mpegURL":case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"audio/mpegurl":{let g=a.filter((e=>"#EXT-X-MEDIA"===e?.TAG)).filter((e=>e?.OPTION?.TYPE===t)).filter((e=>"YES"!==e?.OPTION?.FORCED));for(let e of s)if(console.log(`ğŸš§ Get Attribute List, for (let ${e} of langcodes)`,""),n=g.filter((a=>a?.OPTION?.LANGUAGE?.toLowerCase()===e?.toLowerCase())),0!==n.length)break;n=n.map((a=>(a.URL=l(e,a?.OPTION?.URI??null),a)));break}case"text/json":case"application/json":switch(this.platform){case"PrimeVideo":{let e=a?.[t]??[];for(let a of s)if(console.log(`ğŸš§ Get Attribute List, for (let ${a} of langcodes)`,""),n=e.filter((e=>e?.languageCode?.toLowerCase()===a?.toLowerCase())),0!==n.length)break;n=n.map((e=>(e.URL=e.url,e)));break}}}return console.log(`âœ… Get Attribute List, matchList: ${JSON.stringify(n)}`,""),n}set(e=[],a={},t=[],s=[],l=!0,g="iPhone"){t=1==l?t:[t.at(-1)];const o=a?.[s?.[0]],i=a?.[s?.[1]];switch(console.log(`â˜‘ï¸ Set Attribute List, types: ${t}`,""),this.format){case"application/x-mpegURL":case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"audio/mpegurl":o?.forEach((a=>{const o=e.findIndex((e=>e?.OPTION?.URI===a.OPTION.URI));t.forEach((t=>{let u;switch(console.log(`ğŸš§ Set Attribute List, type: ${t}`,""),t){case"Official":i?.forEach((e=>{if(a?.OPTION?.["GROUP-ID"]===e?.OPTION?.["GROUP-ID"])if("Apple"===this.platform)a?.OPTION.CHARACTERISTICS==e?.OPTION.CHARACTERISTICS&&(u=n(a,e,t,this.platform,l,g));else u=n(a,e,t,this.platform,l,g)}));break;case"Translate":case"External":const e={OPTION:{TYPE:"SUBTITLES",NAME:i?.[0]?.OPTION?.NAME??s[1].toLowerCase(),LANGUAGE:i?.[0]?.OPTION?.LANGUAGE??s[1].toLowerCase()}};u=n(a,e,t,this.platform,l,g),u.OPTION.URI+=`&lang=${a?.OPTION?.LANGUAGE?.toUpperCase()}`}u&&e.splice(o+(l?1:0),0,u)}))}));break;case"text/json":case"application/json":if("PrimeVideo"===this.platform)o?.forEach((a=>{const n=e.findIndex((e=>e?.timedTextTrackId===a.timedTextTrackId));t.forEach((t=>{let g;switch(console.log(`ğŸš§ Set Attribute List, type: ${t}`),t){case"Official":i?.forEach((e=>{if(a.trackGroupId===e.trackGroupId){g=JSON.parse(JSON.stringify(a)),g.displayName=`${t} (${a.displayName}/${e.displayName})`,g.languageCode=`${a.languageCode}/${e.languageCode}_${t}`,g.timedTextTrackId=`${a.timedTextTrackId}_${t}`;const n=g.url.includes("?")?"&":"?";g.url+=`${n}subtype=${t}`,g.url+=`&lang=${s[0]}`}}));break;case"Translate":case"External":g=JSON.parse(JSON.stringify(a)),g.displayName=`${t} (${a.displayName}/${s[1]})`,g.languageCode=`${a.languageCode}/${s[1].toLowerCase()}_${t}`,g.timedTextTrackId=`${a.timedTextTrackId}_${t}`;const e=a.url.includes("?")?"&":"?";g.url+=`${e}subtype=${t}`,g.url+=`&lang=${a.languageCode.toUpperCase()}`}g&&e.splice(n+(l?1:0),0,g)}))}))}return console.log("âœ… Set Attribute List"),e}}var o={Switch:!0,Type:"Translate",Types:["Official","Translate"],Languages:["EN","ZH"],CacheSize:50},i={breakLine:{"text/xml":"&#x000A;","application/xml":"&#x000A;","text/vtt":"\n","application/vtt":"\n","text/json":"\n","application/json":"\n"}},u={Settings:o,Configs:i},r={Switch:!0,Types:["Official","Translate"],Languages:["AUTO","ZH"]},c={Languages:{AUTO:["en","en-US","eng","en-GB","en-UK","en-CA","en-US SDH","ja","ja-JP","jpn","ko","ko-KR","kor","pt","pt-PT","pt-BR","por"],AR:["ar","ar-001"],BG:["bg","bg-BG","bul"],CS:["cs","cs-CZ","ces"],DA:["da","da-DK","dan"],DE:["de","de-DE","deu"],EL:["el","el-GR","ell"],EN:["en","en-US","eng","en-GB","en-UK","en-CA","en-US SDH"],"EN-CA":["en-CA","en","eng"],"EN-GB":["en-UK","en","eng"],"EN-US":["en-US","en","eng"],"EN-US SDH":["en-US SDH","en-US","en","eng"],ES:["es","es-419","es-ES","spa","es-419 SDH"],"ES-419":["es-419","es","spa"],"ES-419 SDH":["es-419 SDH","es-419","es","spa"],"ES-ES":["es-ES","es","spa"],ET:["et","et-EE","est"],FI:["fi","fi-FI","fin"],FR:["fr","fr-CA","fr-FR","fra"],"FR-CA":["fr-CA","fr","fra"],"FR-DR":["fr-FR","fr","fra"],HU:["hu","hu-HU","hun"],ID:["id","id-id"],IT:["it","it-IT","ita"],JA:["ja","ja-JP","jpn"],KO:["ko","ko-KR","kor"],LT:["lt","lt-LT","lit"],LV:["lv","lv-LV","lav"],NL:["nl","nl-NL","nld"],NO:["no","nb-NO","nor"],PL:["pl","pl-PL"],PT:["pt","pt-PT","pt-BR","por"],"PT-PT":["pt-PT","pt","por"],"PT-BR":["pt-BR","pt","por"],RO:["ro","ro-RO","ron"],RU:["ru","ru-RU","rus"],SK:["sk","sk-SK","slk"],SL:["sl","sl-SI","slv"],SV:["sv","sv-SE","swe"],IS:["is","is-IS","isl"],ZH:["zh","cmn","zho","zh-CN","zh-Hans","cmn-Hans","zh-TW","zh-Hant","cmn-Hant","zh-HK","yue-Hant","yue"],"ZH-CN":["zh-CN","zh-Hans","cmn-Hans","zho"],"ZH-HANS":["zh-Hans","cmn-Hans","zh-CN","zho"],"ZH-HK":["zh-HK","yue-Hant","yue","zho"],"ZH-TW":["zh-TW","zh-Hant","cmn-Hant","zho"],"ZH-HANT":["zh-Hant","cmn-Hant","zh-TW","zho"],YUE:["yue","yue-Hant","zh-HK","zho"],"YUE-HK":["yue-Hant","yue","zh-HK","zho"]}},m={Settings:r,Configs:c},d={Switch:!0,Type:"Official",Types:["Translate","External"],Languages:["AUTO","ZH"],AutoCC:!0,ShowOnly:!1},p={Languages:{BG:"bg-BG",CS:"cs",DA:"da-DK",DE:"de",EL:"el",EN:"en","EN-GB":"en-GB","EN-US":"en-US","EN-US SDH":"en-US SDH",ES:"es","ES-419":"es-419","ES-ES":"es-ES",ET:"et-EE",FI:"fi",FR:"fr",HU:"hu-HU",ID:"id",IS:"is-IS",IT:"it",JA:"ja",KO:"ko",LT:"lt-LT",LV:"lv-LV",NL:"nl-NL",NO:"nb-NO",PL:"pl-PL",PT:"pt","PT-PT":"pt-PT","PT-BR":"pt-BR",RO:"ro-RO",RU:"ru-RU",SK:"sk-SK",SL:"sl-SI",SV:"sv-SE",YUE:"yue","YUE-HK":"yue-HK",ZH:"zh","ZH-HANS":"zh-Hans","ZH-HK":"zh-Hant-HK","ZH-HANT":"zh-Hant","ZH-TW":"zh-TW"},translationLanguages:{DESKTOP:[{languageCode:"sq",languageName:{simpleText:"Shqip - é˜¿å°”å·´å°¼äºšè¯­"}},{languageCode:"ak",languageName:{simpleText:"ÃkÃ¡n - é˜¿è‚¯è¯­"}},{languageCode:"ar",languageName:{simpleText:"Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© - é˜¿æ‹‰ä¼¯è¯­"}},{languageCode:"am",languageName:{simpleText:"áŠ áˆ›áˆ­áŠ› - é˜¿å§†å“ˆæ‹‰è¯­"}},{languageCode:"as",languageName:{simpleText:"à¦…à¦¸à¦®à§€à¦¯à¦¼à¦¾ - é˜¿è¨å§†è¯­"}},{languageCode:"az",languageName:{simpleText:"Ø¢Ø°Ø±Ø¨Ø§ÙŠØ¬Ø§Ù† Ø¯ÙŠÙ„ÛŒ - é˜¿å¡æ‹œç–†è¯­"}},{languageCode:"ee",languageName:{simpleText:"ÃˆÊ‹egbe - åŸƒç»´è¯­"}},{languageCode:"ay",languageName:{simpleText:"Aymar aru - è‰¾é©¬æ‹‰è¯­"}},{languageCode:"ga",languageName:{simpleText:"Gaeilge - çˆ±å°”å…°è¯­"}},{languageCode:"et",languageName:{simpleText:"Eesti - çˆ±æ²™å°¼äºšè¯­"}},{languageCode:"or",languageName:{simpleText:"à¬“à¬¡à¬¼à¬¿à¬† - å¥¥é‡Œäºšè¯­"}},{languageCode:"om",languageName:{simpleText:"Afaan Oromoo - å¥¥ç½—è«è¯­"}},{languageCode:"eu",languageName:{simpleText:"Euskara - å·´æ–¯å…‹è¯­"}},{languageCode:"be",languageName:{simpleText:"Ğ‘ĞµĞ»Ğ°Ñ€ÑƒÑĞºĞ°Ñ - ç™½ä¿„ç½—æ–¯è¯­"}},{languageCode:"bg",languageName:{simpleText:"Ğ‘ÑŠĞ»Ğ³Ğ°Ñ€ÑĞºĞ¸ - ä¿åŠ åˆ©äºšè¯­"}},{languageCode:"nso",languageName:{simpleText:"Sesotho sa Leboa - åŒ—ç´¢æ‰˜è¯­"}},{languageCode:"is",languageName:{simpleText:"Ãslenska - å†°å²›è¯­"}},{languageCode:"pl",languageName:{simpleText:"Polski - æ³¢å…°è¯­"}},{languageCode:"bs",languageName:{simpleText:"Bosanski - æ³¢æ–¯å°¼äºšè¯­"}},{languageCode:"fa",languageName:{simpleText:"ÙØ§Ø±Ø³ÛŒ - æ³¢æ–¯è¯­"}},{languageCode:"bho",languageName:{simpleText:"à¤­à¥‹à¤œà¤ªà¥à¤°à¥€ - åšæ°æ™®å°”è¯­"}},{languageCode:"ts",languageName:{simpleText:"Xitsonga - èªåŠ è¯­"}},{languageCode:"tt",languageName:{simpleText:"Ğ¢Ğ°Ñ‚Ğ°Ñ€Ñ‡Ğ° - é‘é¼è¯­"}},{languageCode:"da",languageName:{simpleText:"Dansk - ä¸¹éº¦è¯­"}},{languageCode:"de",languageName:{simpleText:"Deutsch - å¾·è¯­"}},{languageCode:"dv",languageName:{simpleText:"Ş‹Ş¨ŞˆŞ¬Ş€Ş¨Ş„Ş¦ŞŞ° - è¿ªç»´å¸Œè¯­"}},{languageCode:"ru",languageName:{simpleText:"Ğ ÑƒÑÑĞºĞ¸Ğ¹ - ä¿„è¯­"}},{languageCode:"fr",languageName:{simpleText:"franÃ§ais - æ³•è¯­"}},{languageCode:"sa",languageName:{simpleText:"à¤¸à¤‚à¤¸à¥à¤•à¥ƒà¤¤à¤®à¥ - æ¢µè¯­"}},{languageCode:"fil",languageName:{simpleText:"Filipino - è²å¾‹å®¾è¯­"}},{languageCode:"fi",languageName:{simpleText:"suomi - èŠ¬å…°è¯­"}},{languageCode:"km",languageName:{simpleText:"á—á¶áŸá¶ááŸ’á˜áŸ‚áš - é«˜æ£‰è¯­"}},{languageCode:"ka",languageName:{simpleText:"áƒ¥áƒáƒ áƒ—áƒ£áƒšáƒ˜ - æ ¼é²å‰äºšè¯­"}},{languageCode:"gu",languageName:{simpleText:"àª—à«àªœàª°àª¾àª¤à«€ - å¤å‰æ‹‰ç‰¹è¯­"}},{languageCode:"gn",languageName:{simpleText:"AvaÃ±e'áº½ - ç“œæ‹‰å°¼è¯­"}},{languageCode:"kk",languageName:{simpleText:"ÒšĞ°Ğ·Ğ°Ò› Ñ‚Ñ–Ğ»Ñ– - å“ˆè¨å…‹è¯­"}},{languageCode:"ht",languageName:{simpleText:"KreyÃ²l ayisyen - æµ·åœ°å…‹é‡Œå¥¥å°”è¯­"}},{languageCode:"ko",languageName:{simpleText:"í•œêµ­ì–´ - éŸ©è¯­"}},{languageCode:"ha",languageName:{simpleText:"Ù‡ÙÙˆÙØ³Ù - è±ªè¨è¯­"}},{languageCode:"nl",languageName:{simpleText:"Nederlands - è·å…°è¯­"}},{languageCode:"gl",languageName:{simpleText:"Galego - åŠ åˆ©è¥¿äºšè¯­"}},{languageCode:"ca",languageName:{simpleText:"catalÃ  - åŠ æ³°ç½—å°¼äºšè¯­"}},{languageCode:"cs",languageName:{simpleText:"ÄeÅ¡tina - æ·å…‹è¯­"}},{languageCode:"kn",languageName:{simpleText:"à²•à²¨à³à²¨à²¡ - å¡çº³è¾¾è¯­"}},{languageCode:"ky",languageName:{simpleText:"ĞºÑ‹Ñ€Ğ³Ñ‹Ğ· Ñ‚Ğ¸Ğ»Ğ¸ - å‰å°”å‰æ–¯è¯­"}},{languageCode:"xh",languageName:{simpleText:"isiXhosa - ç§‘è¨è¯­"}},{languageCode:"co",languageName:{simpleText:"corsu - ç§‘è¥¿å˜‰è¯­"}},{languageCode:"hr",languageName:{simpleText:"hrvatski - å…‹ç½—åœ°äºšè¯­"}},{languageCode:"qu",languageName:{simpleText:"Runa Simi - å…‹ä¸˜äºšè¯­"}},{languageCode:"ku",languageName:{simpleText:"KurdÃ® - åº“å°”å¾·è¯­"}},{languageCode:"la",languageName:{simpleText:"lingua latÄ«na - æ‹‰ä¸è¯­"}},{languageCode:"lv",languageName:{simpleText:"latvieÅ¡u valoda - æ‹‰è„±ç»´äºšè¯­"}},{languageCode:"lo",languageName:{simpleText:"àºàº²àºªàº²àº¥àº²àº§ - è€æŒè¯­"}},{languageCode:"lt",languageName:{simpleText:"lietuviÅ³ kalba - ç«‹é™¶å®›è¯­"}},{languageCode:"ln",languageName:{simpleText:"lingÃ¡la - æ—åŠ æ‹‰è¯­"}},{languageCode:"lg",languageName:{simpleText:"Luganda - å¢å¹²è¾¾è¯­"}},{languageCode:"lb",languageName:{simpleText:"LÃ«tzebuergesch - å¢æ£®å ¡è¯­"}},{languageCode:"rw",languageName:{simpleText:"Kinyarwanda - å¢æ—ºè¾¾è¯­"}},{languageCode:"ro",languageName:{simpleText:"RomÃ¢nÄƒ - ç½—é©¬å°¼äºšè¯­"}},{languageCode:"mt",languageName:{simpleText:"Malti - é©¬è€³ä»–è¯­"}},{languageCode:"mr",languageName:{simpleText:"à¤®à¤°à¤¾à¤ à¥€ - é©¬æ‹‰åœ°è¯­"}},{languageCode:"mg",languageName:{simpleText:"Malagasy - é©¬æ‹‰åŠ æ–¯è¯­"}},{languageCode:"ml",languageName:{simpleText:"à´®à´²à´¯à´¾à´³à´‚ - é©¬æ‹‰é›…æ‹‰å§†è¯­"}},{languageCode:"ms",languageName:{simpleText:"bahasa Melayu - é©¬æ¥è¯­"}},{languageCode:"mk",languageName:{simpleText:"Ğ¼Ğ°ĞºĞµĞ´Ğ¾Ğ½ÑĞºĞ¸ Ñ˜Ğ°Ğ·Ğ¸Ğº - é©¬å…¶é¡¿è¯­"}},{languageCode:"mi",languageName:{simpleText:"te reo MÄori - æ¯›åˆ©è¯­"}},{languageCode:"mn",languageName:{simpleText:"ĞœĞ¾Ğ½Ğ³Ğ¾Ğ» Ñ…ÑĞ» - è’™å¤è¯­"}},{languageCode:"bn",languageName:{simpleText:"à¦¬à¦¾à¦‚à¦²à¦¾ - å­ŸåŠ æ‹‰è¯­"}},{languageCode:"my",languageName:{simpleText:"á€—á€™á€¬á€…á€¬ - ç¼…ç”¸è¯­"}},{languageCode:"hmn",languageName:{simpleText:"Hmoob - è‹—è¯­"}},{languageCode:"af",languageName:{simpleText:"Afrikaans - å—éè·å…°è¯­"}},{languageCode:"st",languageName:{simpleText:"Sesotho - å—ç´¢æ‰˜è¯­"}},{languageCode:"ne",languageName:{simpleText:"à¤¨à¥‡à¤ªà¤¾à¤²à¥€ - å°¼æ³Šå°”è¯­"}},{languageCode:"no",languageName:{simpleText:"Norsk - æŒªå¨è¯­"}},{languageCode:"pa",languageName:{simpleText:"à¨ªà©°à¨œà¨¾à¨¬à©€ - æ—é®æ™®è¯­"}},{languageCode:"pt",languageName:{simpleText:"PortuguÃªs - è‘¡è„ç‰™è¯­"}},{languageCode:"ps",languageName:{simpleText:"Ù¾ÚšØªÙˆ - æ™®ä»€å›¾è¯­"}},{languageCode:"ny",languageName:{simpleText:"chiCheÅµa - é½åˆ‡ç“¦è¯­"}},{languageCode:"ja",languageName:{simpleText:"æ—¥æœ¬èª - æ—¥è¯­"}},{languageCode:"sv",languageName:{simpleText:"Svenska - ç‘å…¸è¯­"}},{languageCode:"sm",languageName:{simpleText:"Gagana fa'a Samoa - è¨æ‘©äºšè¯­"}},{languageCode:"sr",languageName:{simpleText:"Ğ¡Ñ€Ğ¿ÑĞºĞ¸ Ñ˜ĞµĞ·Ğ¸Ğº - å¡å°”ç»´äºšè¯­"}},{languageCode:"si",languageName:{simpleText:"à·ƒà·’à¶‚à·„à¶½ - åƒ§ä¼½ç½—è¯­"}},{languageCode:"sn",languageName:{simpleText:"ChiShona - ç»çº³è¯­"}},{languageCode:"eo",languageName:{simpleText:"Esperanto - ä¸–ç•Œè¯­"}},{languageCode:"sk",languageName:{simpleText:"slovenÄina - æ–¯æ´›ä¼å…‹è¯­"}},{languageCode:"sl",languageName:{simpleText:"slovenÅ¡Äina - æ–¯æ´›æ–‡å°¼äºšè¯­"}},{languageCode:"sw",languageName:{simpleText:"Kiswahili - æ–¯ç“¦å¸Œé‡Œè¯­"}},{languageCode:"gd",languageName:{simpleText:"GÃ idhlig - è‹æ ¼å…°ç›–å°”è¯­"}},{languageCode:"ceb",languageName:{simpleText:"Binisaya - å®¿åŠ¡è¯­"}},{languageCode:"so",languageName:{simpleText:"Soomaaliga - ç´¢é©¬é‡Œè¯­"}},{languageCode:"tg",languageName:{simpleText:"Ñ‚Ğ¾Ò·Ğ¸ĞºÓ£ - å¡”å‰å…‹è¯­"}},{languageCode:"te",languageName:{simpleText:"à°¤à±†à°²à±à°—à± - æ³°å¢å›ºè¯­"}},{languageCode:"ta",languageName:{simpleText:"à®¤à®®à®¿à®´à¯ - æ³°ç±³å°”è¯­"}},{languageCode:"th",languageName:{simpleText:"à¹„à¸—à¸¢ - æ³°è¯­"}},{languageCode:"ti",languageName:{simpleText:"á‰µáŒáˆ­áŠ› - ææ ¼åˆ©å°¼äºšè¯­"}},{languageCode:"tr",languageName:{simpleText:"TÃ¼rkÃ§e - åœŸè€³å…¶è¯­"}},{languageCode:"tk",languageName:{simpleText:"TÃ¼rkmen - åœŸåº“æ›¼è¯­"}},{languageCode:"cy",languageName:{simpleText:"Cymraeg - å¨å°”å£«è¯­"}},{languageCode:"ug",languageName:{simpleText:"Ø¦Û‡ÙŠØºÛ‡Ø±Ú†Û• - ç»´å¾å°”è¯­"}},{languageCode:"und",languageName:{simpleText:"Unknown - æœªçŸ¥è¯­è¨€"}},{languageCode:"ur",languageName:{simpleText:"Ø§Ø±Ø¯Ùˆ - ä¹Œå°”éƒ½è¯­"}},{languageCode:"uk",languageName:{simpleText:"ÑƒĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ° - ä¹Œå…‹å…°è¯­"}},{languageCode:"uz",languageName:{simpleText:"O'zbek - ä¹Œå…¹åˆ«å…‹è¯­"}},{languageCode:"es",languageName:{simpleText:"EspaÃ±ol - è¥¿ç­ç‰™è¯­"}},{languageCode:"fy",languageName:{simpleText:"Frysk - è¥¿å¼—é‡Œè¥¿äºšè¯­"}},{languageCode:"iw",languageName:{simpleText:"×¢×‘×¨×™×ª - å¸Œä¼¯æ¥è¯­"}},{languageCode:"el",languageName:{simpleText:"Î•Î»Î»Î·Î½Î¹ÎºÎ¬ - å¸Œè…Šè¯­"}},{languageCode:"haw",languageName:{simpleText:"Ê»ÅŒlelo HawaiÊ»i - å¤å¨å¤·è¯­"}},{languageCode:"sd",languageName:{simpleText:"Ø³Ù†ÚŒÙŠ - ä¿¡å¾·è¯­"}},{languageCode:"hu",languageName:{simpleText:"magyar - åŒˆç‰™åˆ©è¯­"}},{languageCode:"su",languageName:{simpleText:"Basa Sunda - å·½ä»–è¯­"}},{languageCode:"hy",languageName:{simpleText:"Õ°Õ¡ÕµÕ¥Ö€Õ¥Õ¶ - äºšç¾å°¼äºšè¯­"}},{languageCode:"ig",languageName:{simpleText:"Igbo - ä¼Šåšè¯­"}},{languageCode:"it",languageName:{simpleText:"Italiano - æ„å¤§åˆ©è¯­"}},{languageCode:"yi",languageName:{simpleText:"×™×™Ö´×“×™×© - æ„ç¬¬ç»ªè¯­"}},{languageCode:"hi",languageName:{simpleText:"à¤¹à¤¿à¤¨à¥à¤¦à¥€ - å°åœ°è¯­"}},{languageCode:"id",languageName:{simpleText:"Bahasa Indonesia - å°åº¦å°¼è¥¿äºšè¯­"}},{languageCode:"en",languageName:{simpleText:"English - è‹±è¯­"}},{languageCode:"yo",languageName:{simpleText:"YorÃ¹bÃ¡ - çº¦é²å·´è¯­"}},{languageCode:"vi",languageName:{simpleText:"Tiáº¿ng Viá»‡t - è¶Šå—è¯­"}},{languageCode:"jv",languageName:{simpleText:"Basa Jawa - çˆªå“‡è¯­"}},{languageCode:"zh-Hant",languageName:{simpleText:"ä¸­æ–‡ï¼ˆç¹é«”ï¼‰- ä¸­æ–‡ï¼ˆç¹ä½“ï¼‰"}},{languageCode:"zh-Hans",languageName:{simpleText:"ä¸­æ–‡ï¼ˆç®€ä½“ï¼‰"}},{languageCode:"zu",languageName:{simpleText:"isiZulu - ç¥–é²è¯­"}},{languageCode:"kri",languageName:{simpleText:"KrÃ¬Ã¬ - å…‹é‡Œè¯­"}}],MOBILE:[{languageCode:"sq",languageName:{runs:[{text:"Shqip - é˜¿å°”å·´å°¼äºšè¯­"}]}},{languageCode:"ak",languageName:{runs:[{text:"ÃkÃ¡n - é˜¿è‚¯è¯­"}]}},{languageCode:"ar",languageName:{runs:[{text:"Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© - é˜¿æ‹‰ä¼¯è¯­"}]}},{languageCode:"am",languageName:{runs:[{text:"áŠ áˆ›áˆ­áŠ› - é˜¿å§†å“ˆæ‹‰è¯­"}]}},{languageCode:"as",languageName:{runs:[{text:"à¦…à¦¸à¦®à§€à¦¯à¦¼à¦¾ - é˜¿è¨å§†è¯­"}]}},{languageCode:"az",languageName:{runs:[{text:"AzÉ™rbaycanca - é˜¿å¡æ‹œç–†è¯­"}]}},{languageCode:"ee",languageName:{runs:[{text:"EÊ‹egbe - åŸƒç»´è¯­"}]}},{languageCode:"ay",languageName:{runs:[{text:"Aymar - è‰¾é©¬æ‹‰è¯­"}]}},{languageCode:"ga",languageName:{runs:[{text:"Gaeilge - çˆ±å°”å…°è¯­"}]}},{languageCode:"et",languageName:{runs:[{text:"Eesti - çˆ±æ²™å°¼äºšè¯­"}]}},{languageCode:"or",languageName:{runs:[{text:"à¬“à¬¡à¬¼à¬¿à¬† - å¥¥é‡Œäºšè¯­"}]}},{languageCode:"om",languageName:{runs:[{text:"Oromoo - å¥¥ç½—è«è¯­"}]}},{languageCode:"eu",languageName:{runs:[{text:"Euskara - å·´æ–¯å…‹è¯­"}]}},{languageCode:"be",languageName:{runs:[{text:"Ğ‘ĞµĞ»Ğ°Ñ€ÑƒÑĞºĞ°Ñ - ç™½ä¿„ç½—æ–¯è¯­"}]}},{languageCode:"bg",languageName:{runs:[{text:"Ğ‘ÑŠĞ»Ğ³Ğ°Ñ€ÑĞºĞ¸ - ä¿åŠ åˆ©äºšè¯­"}]}},{languageCode:"nso",languageName:{runs:[{text:"Sesotho sa Leboa - åŒ—ç´¢æ‰˜è¯­"}]}},{languageCode:"is",languageName:{runs:[{text:"Ãslenska - å†°å²›è¯­"}]}},{languageCode:"pl",languageName:{runs:[{text:"Polski - æ³¢å…°è¯­"}]}},{languageCode:"bs",languageName:{runs:[{text:"Bosanski - æ³¢æ–¯å°¼äºšè¯­"}]}},{languageCode:"fa",languageName:{runs:[{text:"ÙØ§Ø±Ø³ÛŒ - æ³¢æ–¯è¯­"}]}},{languageCode:"bho",languageName:{runs:[{text:"à¤­à¥‹à¤œà¤ªà¥à¤°à¥€ - åšæ°æ™®å°”è¯­"}]}},{languageCode:"ts",languageName:{runs:[{text:"Xitsonga - èªåŠ è¯­"}]}},{languageCode:"tt",languageName:{runs:[{text:"Ğ¢Ğ°Ñ‚Ğ°Ñ€Ñ‡Ğ° - é‘é¼è¯­"}]}},{languageCode:"da",languageName:{runs:[{text:"Dansk - ä¸¹éº¦è¯­"}]}},{languageCode:"de",languageName:{runs:[{text:"Deutsch - å¾·è¯­"}]}},{languageCode:"dv",languageName:{runs:[{text:"Ş‹Ş¨ŞˆŞ¬Ş€Ş¨Ş„Ş¦ŞŞ° - è¿ªç»´å¸Œè¯­"}]}},{languageCode:"ru",languageName:{runs:[{text:"Ğ ÑƒÑÑĞºĞ¸Ğ¹ - ä¿„è¯­"}]}},{languageCode:"fr",languageName:{runs:[{text:"FranÃ§ais - æ³•è¯­"}]}},{languageCode:"sa",languageName:{runs:[{text:"à¤¸à¤‚à¤¸à¥à¤•à¥ƒà¤¤à¤®à¥ - æ¢µè¯­"}]}},{languageCode:"fil",languageName:{runs:[{text:"Filipino - è²å¾‹å®¾è¯­"}]}},{languageCode:"fi",languageName:{runs:[{text:"Suomi - èŠ¬å…°è¯­"}]}},{languageCode:"km",languageName:{runs:[{text:"á—á¶áŸá¶ááŸ’á˜áŸ‚áš - é«˜æ£‰è¯­"}]}},{languageCode:"ka",languageName:{runs:[{text:"áƒ¥áƒáƒ áƒ—áƒ£áƒšáƒ˜ - æ ¼é²å‰äºšè¯­"}]}},{languageCode:"gu",languageName:{runs:[{text:"àª—à«àªœàª°àª¾àª¤à«€ - å¤å‰æ‹‰ç‰¹è¯­"}]}},{languageCode:"gn",languageName:{runs:[{text:"AvaÃ±e'áº½ - ç“œæ‹‰å°¼è¯­"}]}},{languageCode:"kk",languageName:{runs:[{text:"ÒšĞ°Ğ·Ğ°Ò› Ñ‚Ñ–Ğ»Ñ– - å“ˆè¨å…‹è¯­"}]}},{languageCode:"ht",languageName:{runs:[{text:"æµ·åœ°å…‹é‡Œå¥¥å°”è¯­"}]}},{languageCode:"ko",languageName:{runs:[{text:"í•œêµ­ë§ - éŸ©è¯­"}]}},{languageCode:"ha",languageName:{runs:[{text:"Ù‡ÙÙˆÙØ³Ù - è±ªè¨è¯­"}]}},{languageCode:"nl",languageName:{runs:[{text:"Nederlands - è·å…°è¯­"}]}},{languageCode:"gl",languageName:{runs:[{text:"Galego - åŠ åˆ©è¥¿äºšè¯­"}]}},{languageCode:"ca",languageName:{runs:[{text:"CatalÃ  - åŠ æ³°ç½—å°¼äºšè¯­"}]}},{languageCode:"cs",languageName:{runs:[{text:"ÄŒeÅ¡tina - æ·å…‹è¯­"}]}},{languageCode:"kn",languageName:{runs:[{text:"à²•à²¨à³à²¨à²¡ - å¡çº³è¾¾è¯­"}]}},{languageCode:"ky",languageName:{runs:[{text:"ĞšÑ‹Ñ€Ğ³Ñ‹Ğ·Ñ‡Ğ° - å‰å°”å‰æ–¯è¯­"}]}},{languageCode:"xh",languageName:{runs:[{text:"isiXhosa - ç§‘è¨è¯­"}]}},{languageCode:"co",languageName:{runs:[{text:"Corsu - ç§‘è¥¿å˜‰è¯­"}]}},{languageCode:"hr",languageName:{runs:[{text:"Hrvatski - å…‹ç½—åœ°äºšè¯­"}]}},{languageCode:"qu",languageName:{runs:[{text:"Runa Simi - å…‹ä¸˜äºšè¯­"}]}},{languageCode:"ku",languageName:{runs:[{text:"KurdÃ® - åº“å°”å¾·è¯­"}]}},{languageCode:"la",languageName:{runs:[{text:"lingua latÄ«na - æ‹‰ä¸è¯­"}]}},{languageCode:"lv",languageName:{runs:[{text:"LatvieÅ¡u - æ‹‰è„±ç»´äºšè¯­"}]}},{languageCode:"lo",languageName:{runs:[{text:"àº¥àº²àº§ - è€æŒè¯­"}]}},{languageCode:"lt",languageName:{runs:[{text:"LietuviÅ³ - ç«‹é™¶å®›è¯­"}]}},{languageCode:"ln",languageName:{runs:[{text:"LingÃ¡la - æ—åŠ æ‹‰è¯­"}]}},{languageCode:"lg",languageName:{runs:[{text:"Luganda - å¢å¹²è¾¾è¯­"}]}},{languageCode:"lb",languageName:{runs:[{text:"LÃ«tzebuergesch - å¢æ£®å ¡è¯­"}]}},{languageCode:"rw",languageName:{runs:[{text:"Kinyarwanda - å¢æ—ºè¾¾è¯­"}]}},{languageCode:"ro",languageName:{runs:[{text:"RomÃ¢nÄƒ - ç½—é©¬å°¼äºšè¯­"}]}},{languageCode:"mt",languageName:{runs:[{text:"Malti - é©¬è€³ä»–è¯­"}]}},{languageCode:"mr",languageName:{runs:[{text:"à¤®à¤°à¤¾à¤ à¥€ - é©¬æ‹‰åœ°è¯­"}]}},{languageCode:"mg",languageName:{runs:[{text:"Malagasy - é©¬æ‹‰åŠ æ–¯è¯­"}]}},{languageCode:"ml",languageName:{runs:[{text:"à´®à´²à´¯à´¾à´³à´‚ - é©¬æ‹‰é›…æ‹‰å§†è¯­"}]}},{languageCode:"ms",languageName:{runs:[{text:"Bahasa Melayu - é©¬æ¥è¯­"}]}},{languageCode:"mk",languageName:{runs:[{text:"Ğ¼Ğ°ĞºĞµĞ´Ğ¾Ğ½ÑĞºĞ¸ - é©¬å…¶é¡¿è¯­"}]}},{languageCode:"mi",languageName:{runs:[{text:"MÄori - æ¯›åˆ©è¯­"}]}},{languageCode:"mn",languageName:{runs:[{text:"ĞœĞ¾Ğ½Ğ³Ğ¾Ğ» - è’™å¤è¯­"}]}},{languageCode:"bn",languageName:{runs:[{text:"à¦¬à¦¾à¦‚à¦²à¦¾ - å­ŸåŠ æ‹‰è¯­"}]}},{languageCode:"my",languageName:{runs:[{text:"á€—á€™á€¬á€…á€¬ - ç¼…ç”¸è¯­"}]}},{languageCode:"hmn",languageName:{runs:[{text:"Hmoob - è‹—è¯­"}]}},{languageCode:"af",languageName:{runs:[{text:"Afrikaans - å—éè·å…°è¯­"}]}},{languageCode:"st",languageName:{runs:[{text:"Sesotho - å—ç´¢æ‰˜è¯­"}]}},{languageCode:"ne",languageName:{runs:[{text:"à¤¨à¥‡à¤ªà¤¾à¤²à¥€ - å°¼æ³Šå°”è¯­"}]}},{languageCode:"no",languageName:{runs:[{text:"Norsk - æŒªå¨è¯­"}]}},{languageCode:"pa",languageName:{runs:[{text:"à¨ªà©°à¨œà¨¾à¨¬à©€ - æ—é®æ™®è¯­"}]}},{languageCode:"pt",languageName:{runs:[{text:"PortuguÃªs - è‘¡è„ç‰™è¯­"}]}},{languageCode:"ps",languageName:{runs:[{text:"Ù¾ÚšØªÙˆ - æ™®ä»€å›¾è¯­"}]}},{languageCode:"ny",languageName:{runs:[{text:"chiCheÅµa - é½åˆ‡ç“¦è¯­"}]}},{languageCode:"ja",languageName:{runs:[{text:"æ—¥æœ¬èª - æ—¥è¯­"}]}},{languageCode:"sv",languageName:{runs:[{text:"Svenska - ç‘å…¸è¯­"}]}},{languageCode:"sm",languageName:{runs:[{text:"Gagana Samoa - è¨æ‘©äºšè¯­"}]}},{languageCode:"sr",languageName:{runs:[{text:"Ğ¡Ñ€Ğ¿ÑĞºĞ¸ Ñ˜ĞµĞ·Ğ¸Ğº - å¡å°”ç»´äºšè¯­"}]}},{languageCode:"si",languageName:{runs:[{text:"à·ƒà·’à¶‚à·„à¶½ - åƒ§ä¼½ç½—è¯­"}]}},{languageCode:"sn",languageName:{runs:[{text:"ChiShona - ç»çº³è¯­"}]}},{languageCode:"eo",languageName:{runs:[{text:"Esperanto - ä¸–ç•Œè¯­"}]}},{languageCode:"sk",languageName:{runs:[{text:"SlovenÄina - æ–¯æ´›ä¼å…‹è¯­"}]}},{languageCode:"sl",languageName:{runs:[{text:"SlovenÅ¡Äina - æ–¯æ´›æ–‡å°¼äºšè¯­"}]}},{languageCode:"sw",languageName:{runs:[{text:"Kiswahili - æ–¯ç“¦å¸Œé‡Œè¯­"}]}},{languageCode:"gd",languageName:{runs:[{text:"GÃ idhlig - è‹æ ¼å…°ç›–å°”è¯­"}]}},{languageCode:"ceb",languageName:{runs:[{text:"Cebuano - å®¿åŠ¡è¯­"}]}},{languageCode:"so",languageName:{runs:[{text:"Soomaaliga - ç´¢é©¬é‡Œè¯­"}]}},{languageCode:"tg",languageName:{runs:[{text:"Ñ‚Ğ¾Ò·Ğ¸ĞºÓ£ - å¡”å‰å…‹è¯­"}]}},{languageCode:"te",languageName:{runs:[{text:"à°¤à±†à°²à±à°—à± - æ³°å¢å›ºè¯­"}]}},{languageCode:"ta",languageName:{runs:[{text:"à®¤à®®à®¿à®´à¯ - æ³°ç±³å°”è¯­"}]}},{languageCode:"th",languageName:{runs:[{text:"à¹„à¸—à¸¢ - æ³°è¯­"}]}},{languageCode:"ti",languageName:{runs:[{text:"á‰µáŒáˆ­áŠ› - ææ ¼åˆ©å°¼äºšè¯­"}]}},{languageCode:"tr",languageName:{runs:[{text:"TÃ¼rkÃ§e - åœŸè€³å…¶è¯­"}]}},{languageCode:"tk",languageName:{runs:[{text:"TÃ¼rkmen - åœŸåº“æ›¼è¯­"}]}},{languageCode:"cy",languageName:{runs:[{text:"Cymraeg - å¨å°”å£«è¯­"}]}},{languageCode:"ug",languageName:{runs:[{text:"Ø¦Û‡ÙŠØºÛ‡Ø±Ú†Û• - ç»´å¾å°”è¯­"}]}},{languageCode:"und",languageName:{runs:[{text:"Unknown - æœªçŸ¥è¯­è¨€"}]}},{languageCode:"ur",languageName:{runs:[{text:"Ø§Ø±Ø¯Ùˆ - ä¹Œå°”éƒ½è¯­"}]}},{languageCode:"uk",languageName:{runs:[{text:"Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ° - ä¹Œå…‹å…°è¯­"}]}},{languageCode:"uz",languageName:{runs:[{text:"Oâ€˜zbek - ä¹Œå…¹åˆ«å…‹è¯­"}]}},{languageCode:"es",languageName:{runs:[{text:"EspaÃ±ol - è¥¿ç­ç‰™è¯­"}]}},{languageCode:"fy",languageName:{runs:[{text:"Frysk - è¥¿å¼—é‡Œè¥¿äºšè¯­"}]}},{languageCode:"iw",languageName:{runs:[{text:"×¢×‘×¨×™×ª - å¸Œä¼¯æ¥è¯­"}]}},{languageCode:"el",languageName:{runs:[{text:"Î•Î»Î»Î·Î½Î¹ÎºÎ¬ - å¸Œè…Šè¯­"}]}},{languageCode:"haw",languageName:{runs:[{text:"Ê»ÅŒlelo HawaiÊ»i - å¤å¨å¤·è¯­"}]}},{languageCode:"sd",languageName:{runs:[{text:"Ø³Ù†ÚŒÙŠ - ä¿¡å¾·è¯­"}]}},{languageCode:"hu",languageName:{runs:[{text:"Magyar - åŒˆç‰™åˆ©è¯­"}]}},{languageCode:"su",languageName:{runs:[{text:"Basa Sunda - å·½ä»–è¯­"}]}},{languageCode:"hy",languageName:{runs:[{text:"Õ€Õ¡ÕµÕ¥Ö€Õ¥Õ¶ - äºšç¾å°¼äºšè¯­"}]}},{languageCode:"ig",languageName:{runs:[{text:"Igbo - ä¼Šåšè¯­"}]}},{languageCode:"it",languageName:{runs:[{text:"Italiano - æ„å¤§åˆ©è¯­"}]}},{languageCode:"yi",languageName:{runs:[{text:"×™×™Ö´×“×™×© - æ„ç¬¬ç»ªè¯­"}]}},{languageCode:"hi",languageName:{runs:[{text:"à¤¹à¤¿à¤¨à¥à¤¦à¥€ - å°åœ°è¯­"}]}},{languageCode:"id",languageName:{runs:[{text:"Bahasa Indonesia - å°åº¦å°¼è¥¿äºšè¯­"}]}},{languageCode:"en",languageName:{runs:[{text:"English - è‹±è¯­"}]}},{languageCode:"yo",languageName:{runs:[{text:"YorÃ¹bÃ¡ - çº¦é²å·´è¯­"}]}},{languageCode:"vi",languageName:{runs:[{text:"Tiáº¿ng Viá»‡t - è¶Šå—è¯­"}]}},{languageCode:"jv",languageName:{runs:[{text:"Basa Jawa - çˆªå“‡è¯­"}]}},{languageCode:"zh-Hant",languageName:{runs:[{text:"ä¸­æ–‡ï¼ˆç¹é«”ï¼‰ - ä¸­æ–‡ï¼ˆç¹ä½“ï¼‰"}]}},{languageCode:"zh-Hans",languageName:{runs:[{text:"ä¸­æ–‡ï¼ˆç®€ä½“ï¼‰"}]}},{languageCode:"zu",languageName:{runs:[{text:"isiZulu - ç¥–é²è¯­"}]}},{languageCode:"kri",languageName:{runs:[{text:"KrÃ¬Ã¬ - å…‹é‡Œè¯­"}]}}]}},h={Settings:d,Configs:p},N={Switch:!0,Type:"Translate",Languages:["AUTO","ZH"]},f={Languages:{AR:"ar",CS:"cs",DA:"da",DE:"de",EN:"en","EN-GB":"en-GB","EN-US":"en-US","EN-US SDH":"en-US SDH",ES:"es","ES-419":"es-419","ES-ES":"es-ES",FI:"fi",FR:"fr",HE:"he",HR:"hr",HU:"hu",ID:"id",IT:"it",JA:"ja",KO:"ko",MS:"ms",NB:"nb",NL:"nl",PL:"pl",PT:"pt","PT-PT":"pt-PT","PT-BR":"pt-BR",RO:"ro",RU:"ru",SV:"sv",TH:"th",TR:"tr",UK:"uk",VI:"vi",IS:"is",ZH:"zh","ZH-HANS":"zh-Hans","ZH-HK":"zh-HK","ZH-HANT":"zh-Hant"}},C={Settings:N,Configs:f},x={Switch:!0,Types:["Translate","External"],Languages:["AUTO","ZH"]},T={Settings:x},y={CacheSize:20,ShowOnly:!1,Position:"Reverse",Offset:0,Tolerance:1e3},S={Settings:y},b={Vendor:"Google",ShowOnly:!1,Position:"Forward",CacheSize:10,Method:"Part",Times:3,Interval:500,Exponential:!0},O={Settings:b},k={SubVendor:"URL",LrcVendor:"NeteaseMusic",CacheSize:50},P={Settings:k},$={GoogleCloud:{Version:"v2",Mode:"Key",Auth:""},Microsoft:{Version:"Azure",Mode:"Token",Region:"",Auth:""},DeepL:{Version:"Free",Auth:""},DeepLX:{Endpoint:"",Auth:""},URL:"",NeteaseMusic:{PhoneNumber:"",Password:""}},E={Settings:$},I=Database={Default:Object.freeze({__proto__:null,Configs:i,Settings:o,default:u}),Universal:Object.freeze({__proto__:null,Configs:c,Settings:r,default:m}),YouTube:Object.freeze({__proto__:null,Configs:p,Settings:d,default:h}),Netflix:Object.freeze({__proto__:null,Configs:f,Settings:N,default:C}),Spotify:Object.freeze({__proto__:null,Settings:x,default:T}),Composite:Object.freeze({__proto__:null,Settings:y,default:S}),Translate:Object.freeze({__proto__:null,Settings:b,default:O}),External:Object.freeze({__proto__:null,Settings:k,default:P}),API:Object.freeze({__proto__:null,Settings:$,default:E})};function v(t,s,n){console.log("â˜‘ï¸ Set Environment Variables","");let{Settings:l,Caches:g,Configs:o}=function(t,s,n){let l=a.getItem(t,n),g={};if("undefined"!=typeof $argument&&Boolean($argument)){let a=Object.fromEntries($argument.split("&").map((e=>e.split("=").map((e=>e.replace(/\"/g,""))))));for(let t in a)e.set(g,t,a[t])}const o={Settings:n?.Default?.Settings||{},Configs:n?.Default?.Configs||{},Caches:{}};Array.isArray(s)||(s=[s]);for(let e of s)o.Settings={...o.Settings,...n?.[e]?.Settings,...g,...l?.[e]?.Settings},o.Configs={...o.Configs,...n?.[e]?.Configs},l?.[e]?.Caches&&"string"==typeof l?.[e]?.Caches&&(l[e].Caches=JSON.parse(l?.[e]?.Caches)),o.Caches={...o.Caches,...l?.[e]?.Caches};return function e(a,t){for(var s in a){var n=a[s];a[s]="object"==typeof n&&null!==n?e(n,t):t(s,n)}return a}(o.Settings,((e,a)=>("true"===a||"false"===a?a=JSON.parse(a):"string"==typeof a&&(a=a.includes(",")?a.split(",").map((e=>i(e))):i(a)),a))),o;function i(e){return e&&!isNaN(e)&&(e=parseInt(e,10)),e}}(t,s,n);return Array.isArray(l?.Types)||(l.Types=l.Types?[l.Types]:[]),console.log(`âœ… Set Environment Variables, Settings: ${typeof l}, Settingså†…å®¹: ${JSON.stringify(l)}`,""),("object"!=typeof g?.Playlists||Array.isArray(g?.Playlists))&&(g.Playlists={}),g.Playlists.Master=new Map(JSON.parse(g?.Playlists?.Master||"[]")),g.Playlists.Subtitle=new Map(JSON.parse(g?.Playlists?.Subtitle||"[]")),"object"!=typeof g?.Subtitles&&(g.Subtitles=new Map(JSON.parse(g?.Subtitles||"[]"))),("object"!=typeof g?.Metadatas||Array.isArray(g?.Metadatas))&&(g.Metadatas={}),"object"!=typeof g?.Metadatas?.Tracks&&(g.Metadatas.Tracks=new Map(JSON.parse(g?.Metadatas?.Tracks||"[]"))),{Settings:l,Caches:g,Configs:o}}function w(e,a=100){return console.log(`â˜‘ï¸ Set Cache, cacheSize: ${a}`,""),e=(e=Array.from(e||[])).slice(-a),console.log("âœ… Set Cache",""),e}const A=new t("ğŸ¿ï¸ DualSubs: ğŸ¦ Universal v1.3.1(1006) Manifest.response"),U=new class{constructor(e,a=void 0){return console.log("\nğŸŸ§ URL v2.1.0\n"),e=this.#g(e,a),this}#g(e,a=void 0){const t=/(?:(?<protocol>\w+:)\/\/(?:(?<username>[^\s:"]+)(?::(?<password>[^\s:"]+))?@)?(?<host>[^\s@/]+))?(?<pathname>\/?[^\s@?]+)?(?<search>\?[^\s?]+)?/,s=/(?<hostname>.+):(?<port>\d+)$/;if(e=e.match(t)?.groups||{},a&&(!(a=a?.match(t)?.groups||{}).protocol||!a.hostname))throw new Error(`ğŸš¨ ${name}, ${a} is not a valid URL`);if((e.protocol||a?.protocol)&&(this.protocol=e.protocol||a.protocol),(e.username||a?.username)&&(this.username=e.username||a.username),(e.password||a?.password)&&(this.password=e.password||a.password),(e.host||a?.host)&&(this.host=e.host||a.host,Object.freeze(this.host),this.hostname=this.host.match(s)?.groups.hostname??this.host,this.port=this.host.match(s)?.groups.port??""),e.pathname||a?.pathname){if(this.pathname=e.pathname||a?.pathname,this.pathname.startsWith("/")||(this.pathname="/"+this.pathname),this.paths=this.pathname.split("/").filter(Boolean),Object.freeze(this.paths),this.paths){const e=this.paths[this.paths.length-1];if(e?.includes(".")){const a=e.split(".");this.format=a[a.length-1],Object.freeze(this.format)}}}else this.pathname="";if((e.search||a?.search)&&(this.search=e.search||a.search,Object.freeze(this.search),this.search)){const e=this.search.slice(1).split("&").map((e=>e.split("=")));this.searchParams=new Map(e)}return this.harf=this.toString(),Object.freeze(this.harf),this}toString(){let e="";return this.protocol&&(e+=this.protocol+"//"),this.username&&(e+=this.username+(this.password?":"+this.password:"")+"@"),this.hostname&&(e+=this.hostname),this.port&&(e+=":"+this.port),this.pathname&&(e+=this.pathname),this.searchParams&&(e+="?"+Array.from(this.searchParams).map((e=>e.join("="))).join("&")),e}toJSON(){return JSON.stringify({...this})}}($request.url);A.log(`âš  url: ${U.toJSON()}`,"");const L=$request.method,R=U.hostname,M=U.pathname;U.pathname.split("/").filter(Boolean),A.log(`âš  METHOD: ${L}, HOST: ${R}, PATH: ${M}`,"");const H=($response.headers?.["Content-Type"]??$response.headers?.["content-type"])?.split(";")?.[0];function j(e,a,t){A.log(`â˜‘ï¸ getPlaylistCache, language: ${t}`,"");let s="",n={},l=0;return a?.forEach(((a,g)=>{if(Array.isArray(a?.[t])){let o=a?.[t];o?.some(((a,t)=>!!e.includes(a?.URI??a?.OPTION?.URI??null)&&(l=t,A.log("ğŸš§ getPlaylistCache",`subtitlesPlaylistIndex: ${l}`,""),!0)))&&(s=g,n=a)}})),A.log("âœ… getPlaylistCache",`masterPlaylistURL: ${JSON.stringify(s)}`,""),{masterPlaylistURL:s,subtitlesPlaylist:n,subtitlesPlaylistIndex:l}}async function z(e,a,t,n=0,g="Universal"){return A.log(`â˜‘ï¸ setSubtitlesCache, language: ${t}, index: ${n}`,""),await Promise.all(a?.[t]?.map((async(a,t,o)=>{if(o[n]&&t===n||!o[n]){let t=e.get(a.URL)??[];0===t.length&&(t=await async function(e,a,t){A.log("â˜‘ï¸ Get Subtitle *.vtt *.ttml URLs","");let n=await A.fetch(e,{headers:a}).then(((a,t)=>s.parse(a.body).filter((({URI:e})=>/^.+\.((web)?vtt|ttml2?|xml|smi)(\?.+)?$/.test(e))).filter((({URI:e})=>!e.includes("empty"))).filter((({URI:e})=>!e.includes("blank"))).filter((({URI:e})=>!e.includes("default"))).map((({URI:a})=>l(e,a)))));switch(t){case"Disney+":n.some((e=>/\/.+-MAIN\//.test(e)))&&(n=n.filter((e=>/\/.+-MAIN\//.test(e))));break;case"PrimeVideo":n.some((e=>/\/aiv-prod-timedtext\//.test(e)))&&(n=n.filter((e=>/\/aiv-prod-timedtext\//.test(e)))),n=n.filter(((e,a,t)=>t.indexOf(e,0)===a))}return A.log(`âœ… Get Subtitle *.vtt *.ttml URLs, subtitles: ${n}`,""),n}(a?.URL,$request.headers,g)),0!==t.length&&(e=e.set(a.URL,t)),A.log("âœ… setSubtitlesCache",`val?.URL: ${a?.URL}`,"")}}))),e}A.log(`âš  FORMAT: ${H}`,""),(async()=>{const e=function(e){console.log("â˜‘ï¸ Detect Platform","");let a=/\.(netflix\.com|nflxvideo\.net)/i.test(e)?"Netflix":/(\.youtube|youtubei\.googleapis)\.com/i.test(e)?"YouTube":/\.spotify(cdn)?\.com/i.test(e)?"Spotify":/\.apple\.com/i.test(e)?"Apple":/\.(dssott|starott)\.com/i.test(e)?"Disney+":/primevideo\.com|(\.(pv-cdn|aiv-cdn|akamaihd|cloudfront)\.net)|s3\.amazonaws\.com\/aiv-prod-timedtext\//i.test(e)?"PrimeVideo":/prd\.media\.h264\.io/i.test(e)?"Max":/\.(api\.hbo|hbomaxcdn)\.com/i.test(e)?"HBOMax":/\.hulu(stream|im)?\.com/i.test(e)?"Hulu":/\.(pplus\.paramount\.tech|cbs(aavideo|cbsivideo)?\.com)/i.test(e)?"Paramount+":/\.uplynk\.com/i.test(e)?"Discovery+":/dplus-ph-/i.test(e)?"Discovery+Ph":/\.peacocktv\.com/i.test(e)?"PeacockTV":/\.fubo\.tv/i.test(e)?"FuboTV":/\.viki\.io/i.test(e)?"Viki":/epix(hls\.akamaized\.net|\.services\.io)/i.test(e)?"MGM+":/\.nebula\.app/i.test(e)?"Nebula":/\.pluto(\.tv|tv\.net)/i.test(e)?"PlutoTV":/\.mubicdn\.net/i.test(e)?"MUBI":"Universal";return console.log(`âœ… Detect Platform, Platform: ${a}`,""),a}($request.url);A.log(`âš  PLATFORM: ${e}`,"");const{Settings:t,Caches:n,Configs:l}=v("DualSubs",[["YouTube","Netflix","BiliBili","Spotify"].includes(e)?e:"Universal","Composite"],I);switch(A.log(`âš  Settings.Switch: ${t?.Switch}`,""),t.Switch){case!0:default:const o=U.searchParams?.get("subtype")??t.Type,i=[U.searchParams?.get("lang")?.toUpperCase?.()??t.Languages[0],(U.searchParams?.get("tlang")??n?.tlang)?.toUpperCase?.()??t.Languages[1]];A.log(`âš  Type: ${o}, Languages: ${i}`,"");const{standard:u,device:r}=function(e=new URL,a={},t="Universal"){console.log("â˜‘ï¸ is Standard?","");const s=a["user-agent"]??a["User-Agent"];console.log(`ğŸš§ is Standard?, UA: ${s}`,"");let n=s.includes("Mozilla/5.0")?"Web":s.includes("iPhone")?"iPhone":s.includes("iPad")?"iPad":s.includes("Macintosh")?"Macintosh":s.includes("AppleTV")||s.includes("Apple TV")?"AppleTV":"iPhone";switch(t){case"Max":case"HBOMax":(a["x-hbo-device-name"]?.includes("ios")||"iphone"===e.searchParams.get("device-code"))&&(n="iPhone");break;case"PeacockTV":s.includes("PeacockMobile")&&(n="iPhone")}let l=!0;switch(n){case"iPhone":case"iPad":case"Macintosh":switch(t){case"Max":case"HBOMax":case"Viki":case"PeacockTV":case"FuboTV":case"MUBI":l=!1;break;default:l=!0}break;case"Web":switch(t){case"Max":case"HBOMax":case"FuboTV":case"TED":case"MUBI":l=!1;break;default:l=!0}break;default:l=!0}return console.log(`âœ… is Standard?, standard: ${l}, device: ${n}`,""),{standard:l,device:n}}(U,$request.headers,e);let c={};switch(H){case void 0:case"application/x-www-form-urlencoded":case"text/plain":default:break;case"application/x-mpegURL":case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"audio/mpegurl":switch(c=s.parse($response.body),function(e={}){let a;return console.log("â˜‘ï¸ detectPlaylist",""),e.forEach((e=>{switch(e.TAG){case"#EXT-X-MEDIA":case"#EXT-X-STREAM-INF":a="Multivariant Playlist";break;case"#EXT-X-PLAYLIST-TYPE":case"EXT-X-TARGETDURATION":case"#EXTINF":a="Media Playlist"}})),console.log(`âœ… detectPlaylist, type: ${a}`,""),a}(c)){case"Multivariant Playlist":let s=n.Playlists.Master.get($request.url)||{};s[i[0]]=new g(H,e).get($request.url,c,"SUBTITLES",l.Languages[i[0]]),s[i[1]]=new g(H,e).get($request.url,c,"SUBTITLES",l.Languages[i[1]]),c=new g(H,e).set(c,s,t.Types,i,u,r),n.Playlists.Master.set($request.url,s),n.Playlists.Master=w(n.Playlists.Master,t.CacheSize),a.setItem("@DualSubs.Composite.Caches.Playlists.Master",n.Playlists.Master);break;case"Media Playlist":switch(o){case"Official":A.log("âš  å®˜æ–¹å­—å¹•","");const{subtitlesPlaylist:s,subtitlesPlaylistIndex:l}=j($request.url,n.Playlists.Master,i[0])??j($request.url,n.Playlists.Master,i[1]);n.Playlists.Subtitle=await z(n.Playlists.Subtitle,s,i[0],l,e),n.Playlists.Subtitle=await z(n.Playlists.Subtitle,s,i[1],l,e),n.Playlists.Subtitle=w(n?.Playlists.Subtitle,t.CacheSize),a.setItem("@DualSubs.Composite.Caches.Playlists.Subtitle",n.Playlists.Subtitle);break;case"Translate":default:A.log("âš  ç¿»è¯‘å­—å¹•","");break;case"External":A.log("âš  å¤–æŒ‚å­—å¹•","")}c=c.map(((a,t)=>{if(!/^.+\.((web)?vtt|ttml2?|xml|smi)(\?.+)?$/.test(a?.URI))return a?.URI&&"MGM+"===e?(a.URI+=`?subtype=${o}`,U.searchParams?.has("lang")&&(a.URI+=`&lang=${U.searchParams.get("lang")}`),a):a;{const e=a.URI.includes("?")?"&":"?";if(/empty|blank|default/.test(a.URI)||(a.URI+=`${e}subtype=${o}`,U.searchParams?.has("lang")&&(a.URI+=`&lang=${U.searchParams.get("lang")}`)),"#EXT-X-BYTERANGE"!==a.TAG)return a;c[t-1].URI=a.URI}}))}$response.body=s.stringify(c);break;case"text/xml":case"text/html":case"text/plist":case"application/xml":case"application/plist":case"application/x-plist":case"text/vtt":case"application/vtt":break;case"text/json":case"application/json":c=JSON.parse($response.body??"{}");let m=n.Playlists.Master.get($request.url)||{};if("PrimeVideo"===e)c?.subtitleUrls&&(m[i[0]]=new g(H,e).get($request.url,c,"subtitleUrls",l.Languages[i[0]]),m[i[1]]=new g(H,e).get($request.url,c,"subtitleUrls",l.Languages[i[1]]),c.subtitleUrls=new g(H,e).set(c.subtitleUrls,m,t.Types,i,u,r));n.Playlists.Master.set($request.url,m),n.Playlists.Master=w(n.Playlists.Master,t.CacheSize),a.setItem("@DualSubs.Composite.Caches.Playlists.Master",n.Playlists.Master),$response.body=JSON.stringify(c);case"application/protobuf":case"application/x-protobuf":case"application/vnd.google.protobuf":case"application/grpc":case"application/grpc+proto":case"application/octet-stream":}case!1:}})().catch((e=>A.logErr(e))).finally((()=>A.done($response)));
